<header-selector></header-selector>
<sidebar-selector></sidebar-selector>
<div class="container">
  <h2> Pre-Inspection Survey, CaseId : {{caseId}}</h2>
  <mat-horizontal-stepper [linear]="isLinear" #stepper>
    <mat-step [stepControl]="firstFormGroup">
      <form [formGroup]="firstFormGroup" >
        <ng-template matStepLabel>Case Details</ng-template>
        <h4>Case Details</h4>        
        <mat-form-field>
          <input matInput placeholder="Case Ref No" formControlName="CaseRefNo">
        </mat-form-field>
        <mat-form-field>
          <input matInput placeholder="Case Proposer Name" formControlName="CaseProposerName">
        </mat-form-field>       
        <mat-form-field>
          <input matInput placeholder="Assigned Date Time" formControlName="AssignedDateTime"  [matDatepicker]="picker1">
          <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
          <mat-datepicker #picker1></mat-datepicker>
        </mat-form-field>
        <mat-form-field>
          <input matInput placeholder="Case Address" formControlName="caseAddress">
        </mat-form-field>
       
        <mat-form-field>
          <input matInput placeholder="Inspection Date" formControlName="InspectionDate"  [matDatepicker]="picker2">
          <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
          <mat-datepicker #picker2></mat-datepicker>
        </mat-form-field>
        
        <mat-form-field>
          <input matInput placeholder="Inspection Time" formControlName="InspectionTime">
         
        </mat-form-field>

        <mat-form-field>
          <input matInput placeholder="Inspection Location" formControlName="InspectionLocation">
        </mat-form-field>
        <mat-form-field>
          <input matInput placeholder="Inspection Geo Codes" formControlName="InspectionGeoCodes">
        </mat-form-field>        
        <div style="text-align: center; margin-top: 50px;">
          <div class="alert success" *ngIf="showSuccess" >Data Saved {{successMessage}}fully.</div>
          <div class="alert error" *ngIf="showError">Data Saved {{errorMessage}}.</div>
          <button mat-raised-button  matStepperNext >Skip</button>
          <button mat-raised-button color="primary" style="margin-left: 10px;"
           (click)="firstStepSubmit(firstFormGroup.value);" [disabled]="firstFormGroup.invalid">Next</button>
        </div>
      </form>
    </mat-step>

    <mat-step [stepControl]="thirdFormGroup">
      <form [formGroup]="thirdFormGroup">
        <ng-template matStepLabel>Vehicle</ng-template>
        <h4>Vehicle Details</h4>
        <mat-form-field>
          <input matInput placeholder="Registration No" formControlName="Registration_No">
        </mat-form-field>
        <mat-form-field>
          <input matInput placeholder="Chasis No" formControlName="ChasisNo">
        </mat-form-field>
        <mat-form-field>
          <input matInput placeholder="Engine No" formControlName="EngineNo">
        </mat-form-field>
        <mat-form-field>
          <input matInput placeholder="Make" formControlName="Make">
        </mat-form-field>
        <mat-form-field>
          <input matInput placeholder="Model" formControlName="Model">
        </mat-form-field>
        <mat-form-field>
          <input matInput placeholder="Variant" formControlName="Variant">
        </mat-form-field>
        <mat-form-field>
          <input matInput placeholder="Manufacture of Year" formControlName="MgfYear"  [matDatepicker]="picker4">
          <mat-datepicker-toggle matSuffix [for]="picker4"></mat-datepicker-toggle>
          <mat-datepicker #picker4></mat-datepicker>
        </mat-form-field>
        <mat-form-field>
          <input matInput placeholder="Color" formControlName="Color">
        </mat-form-field>
        <mat-form-field>
          <input matInput placeholder="Registration Date" formControlName="RegistrationDate" required  [matDatepicker]="picker5">
          <mat-datepicker-toggle matSuffix [for]="picker5"></mat-datepicker-toggle>
          <mat-datepicker #picker5></mat-datepicker>
        </mat-form-field>
        <mat-form-field>
          <input matInput placeholder="Fuel Type" formControlName="FuelType">
        </mat-form-field>
        <mat-form-field>
          <input matInput placeholder="Hypoticated To" formControlName="HypoticatedTo">
        </mat-form-field>
        <mat-form-field>
          <input matInput placeholder="Odometer Reading" formControlName="OdometerReading">
        </mat-form-field>
        
        <div style="text-align: center; margin-top: 50px;">
          <div class="alert success" *ngIf="showSuccess" >Data Saved {{successMessage}}fully.</div>
          <div class="alert error" *ngIf="showError">Data Saved {{errorMessage}}.</div>
          <button mat-raised-button  matStepperNext >Skip</button>
          <button mat-raised-button color="primary" style="margin-left: 10px;"  (click)="thirdStepSubmit(thirdFormGroup.value);"
          [disabled]="thirdFormGroup.invalid">Next</button>
        </div>
      </form>
    </mat-step>

    <mat-step [stepControl]="ninethFormGroup">
      <form [formGroup]="ninethFormGroup">
        <ng-template matStepLabel>Insurance Details</ng-template>
        <h4>Insurance Details</h4>
        <mat-form-field>
          <input matInput placeholder="Current Insurer Name" formControlName="CurrentInsurerName">
        </mat-form-field>        
        <mat-form-field>
          <input matInput placeholder="Current Policy No" formControlName="CurrentPolicyNo">
        </mat-form-field>
        <mat-form-field>
          <input matInput placeholder="Policy End Date" formControlName="PolicyEndDate">
        </mat-form-field>
        <mat-form-field>
          <input matInput placeholder="Claim History" formControlName="ClaimHistory">
        </mat-form-field>
        <mat-form-field>
          <input matInput placeholder="Gap InInsurance" formControlName="GapInInsurance">
        </mat-form-field>
        <mat-form-field>
          <input matInput placeholder="Proposed Insured" formControlName="ProposedInsured">
        </mat-form-field>
        <mat-form-field>
          <textarea matInput placeholder="Case Remarks" formControlName="CaseRemarks"></textarea>
        </mat-form-field>
        <div style="text-align: center; margin-top: 50px;">
          <div class="alert success" *ngIf="showSuccess" >Data Saved {{successMessage}}fully.</div>
          <div class="alert error" *ngIf="showError">Data Saved {{errorMessage}}.</div>
          <button mat-raised-button  matStepperNext >Skip</button>
          <button mat-raised-button color="primary" style="margin-left: 10px;"  (click)="ninthStepSubmit(ninethFormGroup.value);"
          [disabled]="thirdFormGroup.invalid">Next</button>
        </div>
      </form>
    </mat-step>


    <mat-step [stepControl]="seventhFormGroup">
      <form [formGroup]="seventhFormGroup">
        <ng-template matStepLabel>Crash Images</ng-template>
        <h4>Crash Images Details</h4>
        <div class="tabularData card">
          <h5>Upload Front Image</h5>            
          <img  alt="" [src]="imageToShow1" />
          <input type="file" name="" id="" (change)="onFileChanged1($event)" class="custom-file-input"  />
        </div>
        <div class="tabularData card">
          <h5>Upload Back Image</h5>
          <img  alt="" [src]="imageToShow2" />
          <input type="file" name="" id="" (change)="onFileChanged2($event)" class="custom-file-input"  />
        </div>
        <div class="tabularData card">
          <h5>Upload Left Front Image</h5>
          <img  alt="" [src]="imageToShow3" />
          <input type="file" name="" id="" (change)="onFileChanged3($event)" class="custom-file-input"  />
        </div>
          <div class="tabularData card">
            <h5>Upload Left Image</h5>
            <img  alt="" [src]="imageToShow4" />
            <input type="file" name="" id="" (change)="onFileChanged4($event)" class="custom-file-input"  />
          </div>
          <div class="tabularData card">
            <h5>Upload Left Rear Image</h5>
            <img  alt="" [src]="imageToShow5" />
          <input type="file" name="" id="" (change)="onFileChanged5($event)" class="custom-file-input"  />
          </div>
          <div class="tabularData card">
            <h5>Upload Right Front Image</h5>
            <img  alt="" [src]="imageToShow6" />
          <input type="file" name="" id="" (change)="onFileChanged6($event)" class="custom-file-input"  />
          </div>
          <div class="tabularData card">
            <h5>Upload Right Image</h5>
            <img  alt="" [src]="imageToShow7" />
          <input type="file" name="" id="" (change)="onFileChanged7($event)" class="custom-file-input"  />
          </div>
          <div class="tabularData card">
            <h5>Upload Right Rear Image</h5>
            <img  alt="" [src]="imageToShow8" />
          <input type="file" name="" id="" (change)="onFileChanged8($event)" class="custom-file-input"  />
          </div>
        <div style="text-align: center; margin-top: 50px;">
          <button mat-raised-button  matStepperNext >Next</button>
        </div>
      </form>
    </mat-step>
    
    <mat-step [stepControl]="eightthFormGroup">
      <form [formGroup]="eightthFormGroup">
        <ng-template matStepLabel>Damage Details</ng-template>
        <h4>Damage Details <button mat-raised-button color="primary" (click)="getDamagePartList()" style="float: right;">Add Part</button></h4>
        <div style="max-height: 400px; overflow: auto;"  *ngIf="damageDetailsData.length > 0">                   
            <mat-list role="list"  *ngFor="let data of damageDetailsData">
              <mat-list-item role="listitem" >
                <p><b>PartName:</b>data.PartName</p>
                <p><b>PartStatus:</b>data.PartStatus</p>
                <p><b>PartRemark:</b>data.PartRemark</p>
              </mat-list-item>               
            </mat-list> 
        </div> 
        <p  *ngIf="damageDetailsData.length < 1" style="text-align: center; padding:0 20px;">No Damaged parts are available !</p> 
        <div style="max-height: 450px; overflow: auto;"  *ngIf="damagePartList.length > 0">
            
            <mat-accordion class="example-headers-align">
              <mat-expansion-panel  hideToggle="true"  *ngFor="let item of damagePartList; let i = index;">
                
                <mat-expansion-panel-header (click)="showdamageListData(damagePartList[i]);">
                  <mat-panel-title>
                     Part Name: &nbsp; {{item.PartName}}
                  </mat-panel-title>
                  <!-- <mat-panel-description>
                    Type the country name
                  </mat-panel-description> -->
                </mat-expansion-panel-header>
                
                
                  <input  formControlName="PartType" value="{{item.PartType}}" style="display: none">
               
                  <input  formControlName="PartID" value="{{item.PartID}}" style="display: none">
                
                  <input  formControlName="PartName" value="{{item.PartName}}" style="display: none">
                
                  <input  formControlName="PartStatusID" value="{{item.PartStatusID}}" style="display: none">
                


                <mat-radio-group style="width: 40%; margin: 0 45px;" formControlName="PartStatus">
                  <mat-radio-button value="1" checked>Safe</mat-radio-button>
                  <mat-radio-button value="2">Scratched</mat-radio-button>
                  <mat-radio-button value="3">Dented</mat-radio-button>
                  <mat-radio-button value="4">Broken</mat-radio-button>
                </mat-radio-group><br/><br/>
                <mat-form-field>
                  <textarea matInput placeholder="Part Remark" formControlName="PartRemark"></textarea>
                </mat-form-field>
            
                <mat-action-row >
                  <button mat-raised-button color="primary" (click)="eightthStepSubmit(eightthFormGroup.value)">Save</button>
                </mat-action-row>
                
              </mat-expansion-panel>
            </mat-accordion>
          
        </div>

        <div style="text-align: center; margin-top: 50px;">
          <button mat-raised-button  matStepperNext style="margin-right: 10px;">Skip</button>
        </div>
      </form>
    </mat-step>

    <mat-step [stepControl]="seventhFormGroup">
        <form [formGroup]="seventhFormGroup">
          <ng-template matStepLabel>Surveyor Signature</ng-template>
          <div class="tabularData card" style="width:50%; margin-left: 23%;" >
            <h5>Upload Surveyor Signature</h5>           
            <img  alt="" [src]="imageToShow13" style="min-height: 200px; max-height: 250px; max-width: 400px;" />
            <input type="file" name="" id="" (change)="onFileChanged13($event)" class="custom-file-input"  />
          </div>
          <div  style="text-align: center; margin-top: 50px;">
              <button mat-raised-button  matStepperNext style="margin-right: 10px;">Next</button>
          </div>
        </form>
      </mat-step>

    <mat-step [stepControl]="tenthFormGroup">
      <form [formGroup]="tenthFormGroup">
        <ng-template matStepLabel>Conclusion</ng-template>
        <h4>Conclusion Details</h4>
        <div style="width: 40%; margin: 0 45px;">
          <label>Proposed Insurance is Registered Owner </label><br/><br/>
          <mat-radio-group formControlName="InsuranceRecommeded">
            <mat-radio-button value="yes">Recommended for Insurance</mat-radio-button><br/><br/>
            <mat-radio-button value="no">Not Recommended for Insurance</mat-radio-button>
          </mat-radio-group>
        </div><br/>
        <mat-form-field>
          <textarea matInput placeholder="Conclusion Remarks" formControlName="ConclusionRemarks"></textarea>
        </mat-form-field>
        <p>Declaration of the Owner</p>
        <p>I hereby confirm and declare that the above mentioned identification details of my<br/> vehicle ------- REG NO ------- as well as
           that of damage to the vehicle noticed by <br/>inspecting officer are correct and nothing has been hidden undisclosed.</p>
        <p>Signature of the Inspecting officer Surveyor.<br/>
            Signature of the propserRepresentive</p>
        
        <div style="text-align: center; margin-top: 50px;">
          <div class="alert success" *ngIf="showSuccess" >Data Saved {{successMessage}}fully.</div>
          <div class="alert error" *ngIf="showError">Data Saved {{errorMessage}}.</div>         
          <button mat-raised-button color="primary" (click)="tenthStepSubmit(tenthFormGroup.value);"
          [disabled]="tenthFormGroup.invalid">Submit</button>
        </div>    
      </form>
    </mat-step>

  </mat-horizontal-stepper>
</div>  



